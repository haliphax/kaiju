define(["lib/jquery","lib/jquery-ui","lib/knockout"],function(e,t,n){var r={applied:!1,client:null,bldg:{name:n.observable(),idescr:n.observable(),odescr:n.observable()},upkeep:{item:n.observable(),params:n.observableArray()},fn:{}};return r.fn.bldg_opts=function(){r.client.action_loadview(null,"global","bldg_opts",null,function(t){t.ajax({url:"client/actparams/global/bldg_opts",success:function(i){r.bldg.name(i.params.name),r.bldg.idescr(i.params.idescr),r.bldg.odescr(i.params.odescr),t.ajax({url:"client/actparams/global/bldg_upkeep",success:function(i){r.upkeep.params(i.params),r.upkeep.item(r.upkeep.params()[0]),r.applied||(r.applied=!0,r.client=t,n.applyBindings(r,e("#building_opts")[0])),e("#building_opts").dialog("open")}})}})})},r.fn.bldg_opts_submit=function(){r.client.ajax({url:"client/action/global/bldg_opts",type:"POST",data:n.toJS(r.bldg),success:function(t){r.client.status_bind(t),e("#building_opts").dialog("close")}})},r.fn.bldg_upkeep=function(){if(typeof r.upkeep.item().num=="undefined")return;r.client.ajax({url:"client/action/global/bldg_upkeep/"+r.upkeep.item().inum,success:function(e){r.client.status_bind(e),r.fn.bldg_opts()}})},r.fn.bldg_upkeep_rpt=function(){if(typeof r.upkeep.item().num=="undefined")return;r.client.ajax({url:"client/repeat/action/global/bldg_upkeep/"+r.upkeep.item().inum,success:function(e){r.client.status_bind(e),r.fn.bldg_opts()}})},{fire:function(e,t,n){r.client=n,r.fn.bldg_opts()}}});